define("tiny_cursive/show_url_in_submission_grade",["jquery","core/ajax","core/str","core/templates","./replay"],(function($,AJAX,str,templates,Replay){const replayInstances={};window.myFunction=function(){let mid=$(this).data("id");$("#typeid"+mid).show()},window.video_playback=function(mid,filepath){if(""!==filepath){$("#playback"+mid).show();const replay=new Replay(elementId="output_playback_"+mid,filePath=filepath,speed=10,loop=!1,controllerId="player_"+mid);replayInstances[mid]=replay}else alert("No submission");return!1},window.popup_item=function(mid){$("#"+mid).show()};var usersTable={init:function(score_setting){str.get_strings([{key:"field_require",component:"tiny_cursive"}]).done((function(){usersTable.appendSubmissionDetail(score_setting)}))},appendSubmissionDetail:function(score_setting){$(document).ready((function($){var divElement=$('.path-mod-assign [data-region="grade-panel"]')[0],previousContextId=window.location.href;new MutationObserver((function(mutations){mutations.forEach((function(mutation){var currentContextId=window.location.href;currentContextId!==previousContextId&&(window.location.reload(),previousContextId=currentContextId)}))})).observe(divElement,{childList:!0,subtree:!0});let sub_url=window.location.href,parm=new URL(sub_url),userid=parm.searchParams.get("userid"),cmid=parm.searchParams.get("id");var st="font-size:24px;color:black;border:none";let args={id:userid,modulename:"assign",cmid:cmid},com=AJAX.call([{methodname:"cursive_get_assign_grade_comment",args:args}]);return com[0].done((function(json){var data=JSON.parse(json);$(".alert").remove(),"comments"!=data.usercomment&&$(document).ready((function(){$('div[data-region="grade-panel"]').append('<div class="dropdown">');var tt="";data.usercomment.forEach((element=>{tt+="<li>"+element.usercomment+"</li>"}));$('div[data-region="grade-panel"]').append('<div class="border alert alert-warning"><details><summary>Content Sources Provided by Student</summary> '+tt+"</details></div></div>")}));var filepath="";if(data.data.filename)filepath=data.data.filename;var score=parseFloat(data.data.score),icon="fa fa-circle-o",color="font-size:24px;color:black";data.data.first_file?(icon="fa  fa fa-solid fa-info-circle typeid",color="font-size:24px;color:#000000"):score>=score_setting?(icon="fa fa-check-circle typeid",color="font-size:24px;color:green"):score<score_setting?(icon="fa fa-question-circle typeid",color="font-size:24px;color:#A9A9A9"):(icon="fa fa-circle-o typeid",color="font-size:24px;color:black");var html='<div class="justify-content-center d-flex py-3"><button onclick="popup_item('+userid+')" data-id='+userid+' class="mr-2 fa fa-area-chart popup_item" style="'+st+'"></button><a href="#" onclick="video_playback('+userid+", '"+filepath+'\')" data-filepath="'+filepath+'" data-id="playback_'+userid+'" class="mr-2 video_playback_icon fa fa-play video_playback" style="'+st+'"></a><button onclick="myFunction()" data-id='+userid+' class="'+icon+' " style="border:none; '+color+';"></button></div>      ';$('div[data-region="grade-actions"]').before(html);var context={tabledata:data.data,page:score_setting,userid:userid};templates.render("tiny_cursive/pop_modal",context).then((function(html){$("body").append(html)})).catch((e=>window.console.error(e)))})),$(window).on("click",(function(e){e.target.id=="modal-close"+userid&&$("#"+userid).hide(),e.target.id=="modal-close-playback"+userid&&($("#playback"+userid).hide(),replayInstances[userid]&&replayInstances[userid].stopReplay())})),com.usercomment}))}};return usersTable}));

//# sourceMappingURL=show_url_in_submission_grade.min.js.map