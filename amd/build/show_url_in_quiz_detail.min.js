define("tiny_cursive/show_url_in_quiz_detail",["jquery","core/ajax","core/str","core/templates","./replay","./analytic_button","./analytic_events"],(function($,AJAX,str,templates,Replay,analyticButton,AnalyticEvents){const replayInstances={};window.video_playback=function(mid,filepath,questionid){if(""!==filepath){const replay=new Replay("content"+mid,filepath,10,!1,"player_"+mid+questionid);replayInstances[mid]=replay}else templates.render("tiny_cursive/no_submission").then((html=>{$("#content"+mid).html(html)})).catch((e=>window.console.error(e)));return!1};var usersTable={init:function(scoreSetting,showcomment){str.get_strings([{key:"field_require",component:"tiny_cursive"}]).done((function(){usersTable.appendSubmissionDetail(scoreSetting,showcomment)}))},appendSubmissionDetail:function(scoreSetting,showcomment){let subUrl=window.location.href,attemptId=new URL(subUrl).searchParams.get("attempt"),cmid=M.cfg.contextInstanceId;var userid="";$("table.generaltable.generalbox.quizreviewsummary tbody tr").each((function(){var href=$(this).find('a[href*="/user/view.php"]').attr("href");if(href){var id=href.match(/id=(\d+)/);id&&(userid=id[1])}})),$("#page-mod-quiz-review .info").each((function(){var editQuestionLink=$(this).find('.editquestion a[href*="question/bank/editquestion/question.php"]'),questionid=0;editQuestionLink.length>0&&(editQuestionLink=editQuestionLink.attr("href"),questionid=editQuestionLink.match(/&id=(\d+)/)[1]);let args={id:attemptId,modulename:"quiz",cmid:cmid,questionid:questionid,userid:userid},com=AJAX.call([{methodname:"cursive_get_comment_link",args:args}]);return com[0].done((function(json){var data=JSON.parse(json);if(data.data.filename){var content=$('.que.essay .editquestion a[href*="question/bank/editquestion/question.php"][href*="&id='+data.data.questionid+'"]');if("comments"!=data.usercomment&&parseInt(showcomment)){content.parent().parent().parent().find(".qtext").append('<div class="mb-2">');var tt='<h4>References</h4><div class = "tiny_cursive-quiz-references rounded" >';data.usercomment.forEach((element=>{tt+='<div class = "text-primary p-3" style="border-bottom:1px solid rgba(0, 0, 0, 0.1)">'+element.usercomment+"</div>"})),content.parent().parent().parent().find(".qtext").append(tt+"</div></div>")}var filepath="";data.data.filename&&(filepath=data.data.filename);let analyticButtonDiv=document.createElement("div");analyticButtonDiv.classList.add("text-center","mt-2"),analyticButtonDiv.append(analyticButton(userid,questionid)),content.parent().parent().parent().find(".qtext").append(analyticButtonDiv);let myEvents=new AnalyticEvents;var context={tabledata:data.data,formattime:myEvents.formatedTime(data.data),page:scoreSetting,userid:userid,quizid:questionid};let authIcon=myEvents.authorshipStatus(data.data.first_file,data.data.score,scoreSetting);myEvents.createModal(userid,context,questionid,authIcon),myEvents.analytics(userid,templates,context,questionid,replayInstances,authIcon),myEvents.checkDiff(userid,data.data.file_id,questionid,replayInstances),myEvents.replyWriting(userid,filepath,questionid,replayInstances),myEvents.quality(userid,templates,context,questionid,replayInstances,cmid)}})),com.usercomment}))}};return usersTable}));

//# sourceMappingURL=show_url_in_quiz_detail.min.js.map