define("tiny_cursive/append_submissions_table",["jquery","core/ajax","core/str","core/templates","./replay","./analytic_button","./analytic_events","core/str"],(function($,AJAX,str,templates,Replay,analyticButton,AnalyticEvents,Str){const replayInstances={};window.video_playback=function(mid,filepath){if(""!==filepath){const replay=new Replay("content"+mid,filepath,10,!1,"player_"+mid);replayInstances[mid]=replay}else templates.render("tiny_cursive/no_submission").then((html=>($("#content"+mid).html(html),!0))).catch((e=>window.console.error(e)));return!1};var usersTable={init:function(scoreSetting,showcomment){str.get_strings([{key:"confidence_threshold",component:"tiny_cursive"}]).done((function(){usersTable.appendTable(scoreSetting,showcomment)}))},appendTable:function(scoreSetting){let subUrl=window.location.href,parm=new URL(subUrl),hTr=$("thead").find("tr").get()[0];Str.get_string("analytics","tiny_cursive").then((analyticString=>($(hTr).find("th").eq(3).after('<th class="header c4" scope="col">'+analyticString+'<div class="commands"><i class="icon fa fa-minus fa-fw " aria-hidden="true"></i></div></th>'),$("tbody").find("tr").get().forEach((function(tr){let tdUser=$(tr).find("td").get()[0],userid=$(tdUser).find("input[type='checkbox']").get()[0].value,cmid=parm.searchParams.get("id");const tableCell=document.createElement("td");tableCell.appendChild(analyticButton(userid)),$(tr).find("td").eq(3).after(tableCell);let args={id:userid,modulename:"assign",cmid:cmid},com=AJAX.call([{methodname:"cursive_user_list_submission_stats",args:args}]);try{com[0].done((function(json){var data=JSON.parse(json),filepath="";data.res.filename&&(filepath=data.res.filename);let textContent=document.querySelector(".page-header-headings h1").textContent,myEvents=new AnalyticEvents;var context={tabledata:data.res,formattime:myEvents.formatedTime(data.res),moduletitle:textContent,page:scoreSetting,userid:userid};let authIcon=myEvents.authorshipStatus(data.res.first_file,data.res.score,scoreSetting);myEvents.createModal(userid,context,"",authIcon),myEvents.analytics(userid,templates,context,"",replayInstances,authIcon),myEvents.checkDiff(userid,data.res.file_id,"",replayInstances),myEvents.replyWriting(userid,filepath,"",replayInstances),myEvents.quality(userid,templates,context,"",replayInstances,cmid)})).fail((function(error){window.console.error("AJAX request failed:",error)}))}catch(error){window.console.error("Error processing data:",error)}return com.usercomment})),!0))).catch((error=>{window.console.error("Failed to get analytics string:",error)}))}};return usersTable}));

//# sourceMappingURL=append_submissions_table.min.js.map